<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Services - Reynaldo's Car Care Center</title>
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/reynaldoslogo.png">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bebas+Neue&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/css/about_us_extra.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css">
    <link rel="stylesheet" href="assets/css/vanilla-zoom.min.css">
    <link rel="stylesheet" href="assets/css/services.css">
    <link rel="stylesheet" href="assets/css/hover_button.css">
    <link rel="stylesheet" href="assets/css/imagesliderpanels.css">

    <style>
        .modal-body {
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-header{
            background-color: darkred;
            color: white;
        }

        .modal-header .btn-close{
            background-color: rgb(255, 255, 255);
        }
        .summary {
    position: sticky; /* Keeps it in view while scrolling */
    top: 20px; /* Adds spacing from the top when scrolling */
    background: #f8f9fa; /* Light background to distinguish */
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

.product-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}

.product-grid .product-container {
    width: 100%; /* Adjust this for responsiveness */
    max-width: 48%; /* Two items per row in large view */
}

        

    </style>
    
</head>


<body>
    <nav class="navbar navbar-dark navbar-expand-lg fixed-top clean-navbar" style="background: #051129;">
        <div class="container">
            
            <a class="navbar-brand logo" href="homepage.html"><img class="img-fluid" src="assets/img/reynaldoslogo.png" width="100px" style="margin: 0px;padding: 0px;" href="index.html"></a>
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="homepage.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link active" href="user_services.html">Services</a></li>
                        <li class="nav-item"><a class="nav-link" href="user_about-us.html">About Us</a></li>
                        <li class="nav-item"><a class="nav-link" href="user_contact-us.html">Contact Us</a></li>
                </ul>
            </div>
            <!-- User Profile Dropdown -->
            <div class="dropdown ms-auto me-3">
                <a class="dropdown-toggle text-white" href="#" role="button" id="userProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <!-- <img id="profileImage" src="assets/img/default-user-icon.png" alt="Profile Image" width="30" height="30" class="rounded-circle me-2"> -->
                    <span id="userNameDisplay">Welcome, User</span>  <!-- Placeholder for username -->
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userProfileDropdown">
                    <li><a class="dropdown-item" href="userdashboard-profile.html">Profile</a></li>
                    <li><a class="dropdown-item" href="index.html">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="page shopping-cart-page">
        <section class="clean-block clean-cart dark">
            <div class="container">
                <div class="block-heading">
                    <h2 style="color: rgb(112,18,18);font-weight: bold;">Services</h2>
                </div>
                
                <div class="content">
                    
                    <div class="row g-0">
                        <div class="col-md-12 col-lg-8">
                            <div class="search-bar">
                                <input type="text" placeholder="Search service..." class="search-input" id="search-input" />
                            </div>
                            <div class="items" id="cart-items">
                                <div class="category-buttons text-center mb-4">
                                    <button class="category-button" onclick="filterServices('all')">All Categories</button>
                                    <button class="category-button" onclick="filterServices('mechanical')">Mechanical</button>
                                    <button class="category-button" onclick="filterServices('ac-services')">AC Services</button>
                                    <button class="category-button" onclick="filterServices('paint-restoration')">Paint Restoration</button>
                                    <button class="category-button" onclick="filterServices('electrical')">Electrical</button>
                                    <button class="category-button" onclick="filterServices('panels')">Panel Repairs</button>
                                    <button class="category-button" onclick="filterServices('packages-promos')">Packages and Promos</button>
                                </div>
            
                                <select id="category-dropdown" class="mobile-dropdown" onchange="filterByCategory(this.value)">
                                    <option value="all">All Categories</option>
                                    <option value="mechanical">Mechanical</option>
                                    <option value="ac-services">AC Services</option>
                                    <option value="paint-restoration">Paint Restoration</option>
                                    <option value="electrical">Electrical</option>
                                    <option value="panels">Panel Repaints</option>
                                    <option value="packages-promos">Packages and Promos</option>
                                </select>                                


                                <div class="row">
                                <div class="product-grid">


                            </div>
                            </div>   
                            <br>
                             <!-- Summary Section -->
    <div class="col-md-12 col-lg-4">
        <div class="summary">
            <h3>Summary</h3>
            <h4><span class="text">Service(s):</span></h4>
            <h4><span class="price" id="cart-details"></span></h4>
            <h4><span class="text">Subtotal:</span><span class="price" id="subtotal">₱ 0</span></h4>
            <h4><span class="text">Processing Fee:</span><span class="price" id="appointment">₱ 500.00</span></h4>
            <h4><span class="text">Total:</span><span class="price" id="total">₱ 500.00</span></h4>
            <button id="clear-all" class="btn btn-primary btn-sm" onclick="clearCart()">Clear All</button>
            <a href="appointment.html">
                <button class="btn btn-primary btn-lg d-block w-100 btn-estimate" 
                    style="background-color: rgb(255, 255, 255); text-decoration:none; color: rgb(0, 0, 0); border:1px solid black;" 
                    type="button">
                    Get Appointment
                </button>
            </a>
        </div>
    </div>
</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="page-footer dark">
        <div class="container">
            <div class="row">
                <div class="col"><img class="img-fluid" src="assets/img/reynaldoslogo.png" width="200px" style="margin: 0px;padding: 0px;" href="index.html"></div>
                <div class="col-sm-3">
                    <h5>Get started</h5>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="login.html">Sign up</a></li>
                        <li><a href="services.html">Services</a></li>
                    </ul>
                </div>
                <div class="col-sm-3">
                    <h5>About us</h5>
                    <ul>
                        <li><a href="about-us.html">Company Information</a></li>
                        <li><a href="contact-us.html">Contact us</a></li>
                        <li><a href="#">Reviews</a></li>
                    </ul>
                </div>
                <div class="col-sm-3">
                    <h5>Legal</h5>
                    <ul>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Terms of Use</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <p>© 2024 Reynaldo's Car Care Center</p>
        </div>
    </footer>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.js"></script>
    <script src="assets/js/vanilla-zoom.js"></script>
    <script src="assets/js/theme.js"></script>
    
    
<script>
       let allServices = []; // To hold all services fetched from the backend
let selectedServices = []; // To track services added to the summary
const appointmentFee = 500; // Fixed appointment fee

// Fetch Services from Backend (Admin CMS)
async function fetchServices() {
    try {
        const response = await fetch('/api/services'); // Replace this with your actual API endpoint
        allServices = await response.json();
        displayServices(allServices);
    } catch (error) {
        console.error('Error fetching services:', error);
        alert('Unable to load services. Please try again later.');
    }
}

// Display Services on the Page
function displayServices(services) {
    const container = document.querySelector('.product-grid');
    container.innerHTML = '';

    if (services.length === 0) {
        container.innerHTML = '<p>No services available at the moment.</p>';
        return;
    }

    services.forEach(service => {
        const product = document.createElement('div');
        product.className = `product ${service.category} product-container`;
        product.innerHTML = `
            <div class="product-image">
                <img class="img-fluid d-block mx-auto image" src="${service.image}" alt="${service.name}">
            </div>
            <div class="product-info">
                <div class="details-column">
                    <p class="product-name">${service.name}</p>
                    <div class="price">
                        <span class="price-per-item" data-price="${service.price}">₱ ${service.price.toFixed(2)}</span>
                    </div>
                    <button class="btn btn-primary add-to-summary btn-sm" 
                        onclick="addToSummary('${service.id}', '${service.name}', ${service.price})">Add Service</button>
                </div>
            </div>`;
        container.appendChild(product);
    });
}

// Filter Services by Category
function filterServices(category) {
    if (category === 'all') {
        displayServices(allServices);
    } else {
        const filteredServices = allServices.filter(service => service.category === category);
        displayServices(filteredServices);
    }
}

// Add Service to Summary
function addToSummary(id, name, price) {
    if (selectedServices.some(service => service.id === id)) {
        alert(`${name} is already in the summary!`);
        return;
    }

    // Add the service to the summary
    selectedServices.push({ id, name, price });
    localStorage.setItem('selectedServices', JSON.stringify(selectedServices)); // Save to localStorage
    alert(`${name} has been added to the SUMMARY.`);
    updateSummary();
}

// Cancel Service from Summary
function cancelFromSummary(id) {
    const service = selectedServices.find(service => service.id === id);
    if (service) {
        alert(`${service.name} has been removed from the SUMMARY.`);
        selectedServices = selectedServices.filter(service => service.id !== id);
        updateSummary();
    }
}

// Clear All Services
function clearCart() {
    if (confirm('Are you sure you want to clear all selected services?')) {
        selectedServices = [];
        localStorage.removeItem('selectedServices'); // Clear localStorage
        updateSummary();
        alert('All services have been cleared from the SUMMARY.');
    }
}

// Update the Summary Section
function updateSummary() {
    const summaryContainer = document.getElementById('cart-details');
    const subtotalElement = document.getElementById('subtotal');
    const totalElement = document.getElementById('total');
    
    // Clear previous summary
    summaryContainer.innerHTML = '';

    if (selectedServices.length === 0) {
        summaryContainer.innerHTML = '<p>No services selected yet.</p>';
        subtotalElement.textContent = '₱ 0';
        totalElement.textContent = '₱ 500.00';
        return;
    }
    let subtotal = 0;

    selectedServices.forEach(service => {
        subtotal += service.price;
        const summaryItem = document.createElement('div');
        summaryItem.className = 'summary-item';
        summaryItem.innerHTML = `
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span>${service.name}</span>
                <span>₱ ${service.price.toFixed(2)}</span>
                <button class="btn btn-danger btn-sm" onclick="cancelFromSummary('${service.id}')">Cancel</button>
            </div>`;
        summaryContainer.appendChild(summaryItem);
    });

    subtotalElement.textContent = `₱ ${subtotal.toFixed(2)}`;
    totalElement.textContent = `₱ ${(subtotal + appointmentFee).toFixed(2)}`;
}

// Initial Fetch of Services on Page Load
fetchServices();

    </script>
       
</body>
</html>
