<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Appointment Form</title>
    <meta name="description" content="This is the Login page">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bebas+Neue&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="assets/css/about_us_extra.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css">
    <link rel="stylesheet" href="assets/css/vanilla-zoom.min.css">
    <link rel="stylesheet" href="assets/css/services.css">
    <link rel="stylesheet" href="assets/css/hover_button.css">
    <link rel="stylesheet" href="./Appointment/appointment.css">
    <link rel="stylesheet" href="./Calendar/style.css">
    <link rel="stylesheet" href="assets/css/imagesliderpanels.css">
    <link rel="stylesheet" href="assets/js/imagesliderpanels.js">
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-lg fixed-top clean-navbar" style="background: #051129;">
        <div class="container">
            <a class="navbar-brand logo" href="index.html"><img class="img-fluid" src="assets/img/reynaldoslogo.png" width="100px" style="margin: 0px;padding: 0px;" href="index.html"></a>
        </div>
    </nav>
    
        
    <main>
        <div class="appointment-form-wrapper">
        <div class="block-heading">
            <h2 style="font-weight: bold;">Appointment Form</h2>
        </div>

        </section>
        <div class="form-container">
            <div class="row">
                <!-- Column for Summary of Price Breakdown -->
                <div class="col-md-6">
                    <div class="row">
                        <h3>Customer Information</h3>
                        <div class="col-md-6">
                            <label for="username">Name: <input type="text" name="Username" id="username" required></label>  
                        </div>
                        <div class="col-md-6">
                            <label for="phonenumber" >Phone #: <input type="text" name="Phonenumber" id="phonenumber"></label>
                        </div>
                        
                        <div class="col-md-8">
                            <label for="email">Email: <input type="text" name="Email" id="email"></label>
                        </div>

                        <div class="col-md-4">
                            <label for="city">City: <input type="text" name="City" id="city"></label>
                        </div>

                        <div class="col-md-4">
                            <label for="platenum">Plate Number: <input type="text" name="PlateNumber" id="platenum"></label>
                        </div>
                        
                        <div class="col-md-8">
                            <label for="vehicle">Vehicle:</label>
                            <select name="Vehicle" id="vehicle" class="col-md-6" style="width: fit-content;">
                                <option value="" disabled selected>Select Vehicle:</option>
                                <option value="V1">Honda Civic Type R - Red - 2017 </option>
                                <option value="V2">Nissan Grand Livina - White Pearl - 2022</option>
                            </select>
                        </div>
                        <br><br>
                        <div class="slider-container col-md-6">
                            <div class="image-slider">
                                <img id="slider-image" src="assets/img/bodypanels/carbodypanels.png" alt="Image 1">
                            </div>
                    
                            <div class="toggle-tokens">
                                <label>
                                    <input type="checkbox" id="token1-checkbox" onclick="toggleToken(0)">
                                    <span id="token1" class="token">Token 1-1</span>
                                </label>
                                <label>
                                    <input type="checkbox" id="token2-checkbox" onclick="toggleToken(1)">
                                    <span id="token2" class="token">Token 1-2</span>
                                </label>
                                <label>
                                    <input type="checkbox" id="token3-checkbox" onclick="toggleToken(2)">
                                    <span id="token3" class="token">Token 1-3</span>
                                </label>
                                <label>
                                    <input type="checkbox" id="token4-checkbox" onclick="toggleToken(3)">
                                    <span id="token4" class="token">Token 1-4</span>
                                </label>
                            </div>
                    
                            <div class="controls">
                                <button onclick="prevImage()">Previous</button>
                                <button onclick="nextImage()">Next</button>
                            </div>
                        </div> 
   
                    </div>
                </div>
            

            <div class="col-md-6">
                <div class="row">
                <div class="col-md-4">
                    <label>Is the car functional?</label>

                    
                    <label for="yesBtn"><input type="radio" id="yesBtn" name="carfunc" value="yes">Yes</label>
                    
                    
                    <label for="noBtn"><input type="radio" id="noBtn" name="carfunc" value="no">No</label>
                    
                </div>

                <div class="col-md-4">
                    <label for="datepicker">Select Date:</label>
                    <input type="text" name="datepicker" id="datepicker">
                </div>

                <div class="col-md-4">
                    <label for="timepicker">Select Time:</label>
                    <input type="text" name="timepicker" id="timepicker" >
                </div>
                
                <div class="col-md-12">
                    <button id="show-slots-btn" type="button" >Show Available Slots</button>
                </div>
                
            
            <!-- Popup Window for Slots -->
            <div id="slots-popup" class="popup">
                <div class="popup-content">
                    <span class="close">&times;</span>
                    <h2>Available Slots</h2>
                    <div id="slots">
                        <!-- Add checkboxes or buttons here for selecting slots -->
                        <label><input type="checkbox" class="slot" value="Slot 1"> Slot 1</label>
                        <label><input type="checkbox" class="slot" value="Slot 2"> Slot 2</label>
                        <label><input type="checkbox" class="slot" value="Slot 3"> Slot 3</label>
                        <label><input type="checkbox" class="slot" value="Slot 4"> Slot 5</label>
                        <label><input type="checkbox" class="slot" value="Slot 5"> Slot 5</label>
                        <label><input type="checkbox" class="slot" value="Slot 6"> Slot 6</label>
                        <label><input type="checkbox" class="slot" value="Slot 7"> Slot 7</label>
                        <label><input type="checkbox" class="slot" value="Slot 8"> Slot 8</label>
                        <label><input type="checkbox" class="slot" value="Slot 9"> Slot 9</label>
                        <label><input type="checkbox" class="slot" value="Slot 10"> Slot 10</label>
                        <label><input type="checkbox" class="slot" value="Slot 11"> Slot 11</label>
                        <label><input type="checkbox" class="slot" value="Slot 12"> Slot 12</label>
                        <label><input type="checkbox" class="slot" value="Slot 13"> Slot 13</label>
                        <label><input type="checkbox" class="slot" value="Slot 14"> Slot 14</label>
                        <label><input type="checkbox" class="slot" value="Slot 15"> Slot 15</label>
                        <label><input type="checkbox" class="slot" value="Slot 16"> Slot 16</label>
                        <label><input type="checkbox" class="slot" value="Slot 17"> Slot 17</label>
                        <label><input type="checkbox" class="slot" value="Slot 17"> Slot 18</label>
                        <label><input type="checkbox" class="slot" value="Slot 19"> Slot 19</label>
                        <label><input type="checkbox" class="slot" value="Slot 20"> Slot 20</label>
                        <label><input type="checkbox" class="slot" value="Slot 21"> Slot 21</label>
                        <label><input type="checkbox" class="slot" value="Slot 22"> Slot 22</label>
                        <label><input type="checkbox" class="slot" value="Slot 23"> Slot 23</label>
                        <label><input type="checkbox" class="slot" value="Slot 24"> Slot 24</label>
                        <label><input type="checkbox" class="slot" value="Slot 25"> Slot 26</label>
                        <label><input type="checkbox" class="slot" value="Slot 26"> Slot 26</label>
                        <!-- Add more slots as needed -->
                    </div>
                    <p id="availability">Slots Available: <span id="available-slots">26</span></p>
                    <button id="confirm-btn" type="button">Confirm</button>
                </div>
            </div>

                <div class="section"><br>
                  <h3>Estimated Price Breakdown:</h3>
                  <p>Service Estimation: Php ####</p>
                  <p>Towing Fee: Php ####</p>
                  <p>Reservation Fee: Php 500.00 (Non-Refundable)</p>
                  <input class="form-check-input" type="checkbox" name="terms" required style="display: inline-block !important;">
                  <label class="form-check-inline">I have read &amp; accepted the <a href="#" id="terms-link">Terms and Conditions</a></label>
                  
                
                </div>

                <div class="col-md-12">
                    <button type="submit" id="submit-slots-btn">Submit</button> 
                </div>

                <!-- Success message -->
                <div id="success-message" style="display:none; margin-top: 20px;" class="alert alert-success">
                    Your appointment has been submitted successfully!
                </div>
              </div>

    
            </form>
        </div>
    </div>
    </main>

    <!-- Terms and Conditions Modal -->
    <div id="terms-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">Ã—</span>
            <h2>Terms and Conditions</h2>
            <p>These terms and conditions outline the rules and regulations for the use of Reynaldo's Car Care Center's services.</p>
            <p>By booking an appointment, you agree to these terms and conditions. Please read them carefully.</p>
            <p><strong>Service Estimation:</strong> The estimated price for services is subject to change based on the actual inspection of the vehicle.</p>
            <p><strong>Reservation Fee:</strong> The reservation fee is non-refundable and is required to confirm your appointment.</p>
            <p><strong>Towing Service:</strong> If the car is non-functional, an additional fee will be charged for towing services.</p>
            <p><strong>Privacy Policy:</strong> Your personal information will be handled with care and will not be shared with third parties without your consent.</p>
            <p>For more details, please contact us.</p>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#appointmentform').submit(function(event) {
                event.preventDefault();
            
                // Collect form values
                //var Fullname = $('#Fullname').val();
                //var Address = $('#Address').val();
                //var Contact = $('#Contact').val();
                //var Email = $('#Email').val();
                var username = $('#username').val();
                var password = $('#password').val();
                var Brand = $('#Brand').val();
                var Color = $('#Color').val();
                var YearModel = $('#YearModel').val();
                var Plate = $('#Plate').val();
                var panel1 = $('#panel1').is(':checked') ? $('#panel1').val() : '';
                var panel2 = $('#panel2').is(':checked') ? $('#panel2').val() : '';
                var panel3 = $('#panel3').is(':checked') ? $('#panel3').val() : '';
                var panel4 = $('#panel4').is(':checked') ? $('#panel4').val() : '';
                var functionality = $('#functional').is(':checked') ? 'functional' : ($('#nonfunctional').is(':checked') ? 'nonfunctional' : '');
                var datepicker = $('#datepicker').val();
                var timepicker = $('#timepicker').val();
                var slots = $('#slots').val();  // Ensure this input exists
            
                
            
                // AJAX request to send data to backend
                $.ajax({
                    type: 'POST',
                    url: '/appointment',  // Ensure the server route is set correctly
                    data: JSON.stringify({
                        //Fullname: Fullname,
                        //Address: Address,
                        //Contact: Contact,
                        //Email: Email,
                        username: username,
                        password: password,
                        Brand: Brand,
                        Color: Color,
                        YearModel: YearModel,
                        Plate: Plate,
                        panel1: panel1,
                        panel2: panel2,
                        panel3: panel3,
                        panel4: panel4,
                        functionality: functionality,
                        datepicker: datepicker,
                        timepicker: timepicker,
                        slots: slots
                    }),
                    contentType: 'application/json',
                    success: function(response) {
                        if (response.message === 'Appointment created successfully'+ datepicker) {
                            $('#success-message').show();
                          
                            window.location.href = '/success';  // Redirect if successful
                        } else {
                            alert('Failed to create appointment.');
                        }
                    },
                    error: function(xhr, status, error) {
                        // Provide more informative error message
                        alert('An error occurred: ' + xhr.responseText || status || error);
                        console.error('Error details:', xhr.responseText );  // Log error for debugging
                    }
                });
            });
        });
    </script>
    
        
    
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.js"></script>
    <script src="assets/js/vanilla-zoom.js"></script>
    <script src="assets/js/theme.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.css">
    <script src="./Calendar/script.js"></script>
    <script src="./Appointment/appointment.js"></script>
    <script src="assets/js/imagesliderpanels.js"></script>
</body>

</html>
    